<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MEOS — Koninklijke Marechaussee</title>
  <meta name="description" content="Officieel stijl prototype van het MEOS-systeem van de Koninklijke Marechaussee." />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif}
    body{background:#ffffff;color:#1a1a1a;min-height:100vh;padding:20px}

    header{display:flex;align-items:center;justify-content:space-between;background:#00205b;color:#fff;padding:10px 20px;border-radius:12px}
    header img{height:60px;width:auto}
    header h1{font-size:24px;margin:0}

    .app{max-width:1200px;margin:20px auto}

    main{display:grid;grid-template-columns:360px 1fr;gap:18px;margin-top:18px}

    .sidebar{background:#f5f7fa;padding:16px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.1)}
    .details{background:#f5f7fa;padding:16px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.1)}

    h2{color:#00205b}
    button{background:#00205b;color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;transition:background .2s}
    button:hover{background:#001437}
    button.secondary{background:#fff;color:#00205b;border:1px solid #00205b}

    input,textarea,select{width:100%;padding:8px;border:1px solid #ccc;border-radius:8px}
    .filters{display:flex;gap:6px;margin-top:10px;flex-wrap:wrap}
    .chip{padding:6px 10px;border-radius:8px;border:1px solid #ccc;cursor:pointer}
    .chip.active{background:#00205b;color:#fff;border-color:#00205b}

    .inc-list{margin-top:12px;display:flex;flex-direction:column;gap:10px}
    .inc{padding:10px;border-radius:10px;background:#fff;border:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:flex-start}
    .inc h3{margin:0;font-size:15px;color:#00205b}
    .meta{font-size:12px;color:#555}

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:50}
    .modal{background:#fff;padding:20px;border-radius:12px;max-width:420px;width:100%;box-shadow:0 10px 40px rgba(0,0,0,0.3)}
    .modal h3{color:#00205b}

    @media (max-width:900px){main{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:12px">
      <img src="KMar-removebg-preview.png" alt="Logo KMar" />
      <div>
        <h1>MEOS — Koninklijke Marechaussee</h1>
        <p style="font-size:13px;opacity:0.9">Officieel meldingen- en operationsysteem (prototype)</p>
      </div>
    </div>
    <div class="top-actions">
      <button id="importBtn" class="secondary">Import JSON</button>
      <button id="exportBtn">Export JSON</button>
      <button id="loginBtn" class="secondary">Login</button>
    </div>
  </header>

  <div class="app">
    <main>
      <aside class="sidebar">
        <input id="search" placeholder="Zoek melding..." />
        <div class="filters">
          <div class="chip active" data-filter="all">Alle</div>
          <div class="chip" data-filter="open">Open</div>
          <div class="chip" data-filter="ongoing">In uitvoering</div>
          <div class="chip" data-filter="closed">Afgesloten</div>
        </div>
        <div class="inc-list" id="incList"></div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="newInc">Nieuwe melding</button>
          <button id="clearAll" class="secondary">Wis alles</button>
        </div>
      </aside>

      <section class="details">
        <h2 id="detailsTitle">Selecteer een melding</h2>
        <div id="detailBody" style="margin-top:10px;color:#444">Geen melding geselecteerd. Klik op “Nieuwe melding”.</div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="editBtn">Bewerk</button>
          <button id="closeBtn" class="secondary">Sluit melding</button>
        </div>
      </section>
    </main>
  </div>

  <div class="modal-backdrop" id="modal"><div class="modal" id="modalContent"></div></div>

  <script>
    const storageKey = 'meos_kmar_v2';
    let state = {user:null, incidents:[], selectedId:null};
    const $ = s=>document.querySelector(s); const $$ = s=>Array.from(document.querySelectorAll(s));

    function load(){ const raw=localStorage.getItem(storageKey); if(raw) state=JSON.parse(raw); render(); }
    function save(){ localStorage.setItem(storageKey,JSON.stringify(state)); render(); }

    function uid(){return 'id_'+Math.random().toString(36).slice(2,9)}
    function now(){return new Date().toLocaleString('nl-NL')}

    function render(){
      $('#loginBtn').textContent = state.user ? (state.user+' • Logout') : 'Login';
      const list=$('#incList'); list.innerHTML='';
      const q=$('#search').value.toLowerCase();
      const f=document.querySelector('.chip.active')?.dataset.filter||'all';
      state.incidents.filter(i=>f==='all'||i.status===f).filter(i=>(i.title+i.location+i.callSign).toLowerCase().includes(q)).forEach(i=>{
        const el=document.createElement('div'); el.className='inc'; el.dataset.id=i.id;
        el.innerHTML=`<div><h3>${i.title}</h3><div class='meta'>${i.callSign||'—'} • ${i.location||'—'}</div></div><button data-open='${i.id}'>Open</button>`;
        list.appendChild(el);
      });
      renderDetails();
    }

    function renderDetails(){ const i=state.incidents.find(x=>x.id===state.selectedId); const t=$('#detailsTitle'); const b=$('#detailBody'); if(!i){t.textContent='Selecteer een melding'; b.textContent='Geen melding geselecteerd.'; return;} t.textContent=i.title; b.innerHTML=`<strong>Roepnummer:</strong> ${i.callSign||'—'}<br><strong>Status:</strong> ${i.status}<br><strong>Locatie:</strong> ${i.location||'—'}<br><strong>Tijd:</strong> ${i.time}<br><br><strong>Beschrijving:</strong><p>${i.description||'—'}</p>`; }

    $('#newInc').onclick=()=>{
      showModal(`<h3>Nieuwe melding</h3><input id='t' placeholder='Titel'/><input id='c' placeholder='Roepnummer'/><input id='l' placeholder='Locatie'/><textarea id='d' placeholder='Beschrijving...'></textarea><div style='margin-top:10px;text-align:right'><button id='save'>Opslaan</button></div>`);
      $('#save').onclick=()=>{state.incidents.unshift({id:uid(),title:$('#t').value||'Nieuwe melding',callSign:$('#c').value,location:$('#l').value,description:$('#d').value,status:'open',time:now()});hideModal();save();};
    }

    $('#editBtn').onclick=()=>{const i=state.incidents.find(x=>x.id===state.selectedId);if(!i)return;showModal(`<h3>Bewerk melding</h3><input id='t' value='${i.title}'/><input id='c' value='${i.callSign}'/><input id='l' value='${i.location}'/><textarea id='d'>${i.description}</textarea><div style='margin-top:10px;text-align:right'><button id='save'>Opslaan</button></div>`);$('#save').onclick=()=>{i.title=$('#t').value;i.callSign=$('#c').value;i.location=$('#l').value;i.description=$('#d').value;i.time=now();hideModal();save();}}

    $('#closeBtn').onclick=()=>{const i=state.incidents.find(x=>x.id===state.selectedId);if(!i)return;i.status='closed';i.time=now();save();}

    $('#loginBtn').onclick=()=>{if(state.user){state.user=null;save();return}showModal(`<h3>Login</h3><input id='u' placeholder='Gebruikersnaam'/><div style='margin-top:10px;text-align:right'><button id='ok'>Login</button></div>`);$('#ok').onclick=()=>{state.user=$('#u').value;hideModal();save();}}

    $('#clearAll').onclick=()=>{if(confirm('Alle meldingen verwijderen?')){state.incidents=[];state.selectedId=null;save();}}

    $('#exportBtn').onclick=()=>{const blob=new Blob([JSON.stringify(state,null,2)],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='meos_kmar.json';a.click();}

    $('#importBtn').onclick=()=>{showModal(`<h3>Import JSON</h3><input type='file' id='file' accept='application/json'/><div style='margin-top:10px;text-align:right'><button id='ok'>Importeer</button></div>`);$('#ok').onclick=()=>{const f=$('#file').files[0];if(!f)return;const r=new FileReader();r.onload=e=>{state=JSON.parse(e.target.result);hideModal();save();};r.readAsText(f);}}

    $$('#incList').forEach(()=>{});
    $('#search').oninput=()=>render();
    $$('.chip').forEach(c=>c.onclick=()=>{$$('.chip').forEach(x=>x.classList.remove('active'));c.classList.add('active');render();});

    function showModal(html){$('#modalContent').innerHTML=html;$('#modal').style.display='flex';}
    function hideModal(){$('#modal').style.display='none';$('#modalContent').innerHTML='';}

    document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')hideModal();});

    document.addEventListener('click',e=>{if(e.target.dataset.open){state.selectedId=e.target.dataset.open;save();}});

    load();
    if(state.incidents.length===0){state.incidents.push({id:uid(),title:'Controle grenspost',callSign:'KMar-01',location:'Breda',status:'open',description:'Routinecontrole voertuig bij grensovergang.',time:now()});save();}
  </script>
</body>
</html>
<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MEOS — Koninklijke Marechaussee</title>
  <meta name="description" content="Officieel stijl prototype van het MEOS-systeem van de Koninklijke Marechaussee." />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif}
    body{background:#ffffff;color:#1a1a1a;min-height:100vh;padding:20px}

    header{display:flex;align-items:center;justify-content:space-between;background:#00205b;color:#fff;padding:10px 20px;border-radius:12px}
    header img{height:60px;width:auto}
    header h1{font-size:24px;margin:0}

    .app{max-width:1200px;margin:20px auto}

    main{display:grid;grid-template-columns:360px 1fr;gap:18px;margin-top:18px}

    .sidebar{background:#f5f7fa;padding:16px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.1)}
    .details{background:#f5f7fa;padding:16px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.1)}

    h2{color:#00205b}
    button{background:#00205b;color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;transition:background .2s}
    button:hover{background:#001437}
    button.secondary{background:#fff;color:#00205b;border:1px solid #00205b}

    input,textarea,select{width:100%;padding:8px;border:1px solid #ccc;border-radius:8px}
    .filters{display:flex;gap:6px;margin-top:10px;flex-wrap:wrap}
    .chip{padding:6px 10px;border-radius:8px;border:1px solid #ccc;cursor:pointer}
    .chip.active{background:#00205b;color:#fff;border-color:#00205b}

    .inc-list{margin-top:12px;display:flex;flex-direction:column;gap:10px}
    .inc{padding:10px;border-radius:10px;background:#fff;border:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:flex-start}
    .inc h3{margin:0;font-size:15px;color:#00205b}
    .meta{font-size:12px;color:#555}

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:50}
    .modal{background:#fff;padding:20px;border-radius:12px;max-width:420px;width:100%;box-shadow:0 10px 40px rgba(0,0,0,0.3)}
    .modal h3{color:#00205b}

    @media (max-width:900px){main{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:12px">
      <img src="KMar-removebg-preview.png" alt="Logo KMar" />
      <div>
        <h1>MEOS — Koninklijke Marechaussee</h1>
        <p style="font-size:13px;opacity:0.9">Officieel meldingen- en operationsysteem (prototype)</p>
      </div>
    </div>
    <div class="top-actions">
      <button id="importBtn" class="secondary">Import JSON</button>
      <button id="exportBtn">Export JSON</button>
      <button id="loginBtn" class="secondary">Login</button>
    </div>
  </header>

  <div class="app">
    <main>
      <aside class="sidebar">
        <input id="search" placeholder="Zoek melding..." />
        <div class="filters">
          <div class="chip active" data-filter="all">Alle</div>
          <div class="chip" data-filter="open">Open</div>
          <div class="chip" data-filter="ongoing">In uitvoering</div>
          <div class="chip" data-filter="closed">Afgesloten</div>
        </div>
        <div class="inc-list" id="incList"></div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="newInc">Nieuwe melding</button>
          <button id="clearAll" class="secondary">Wis alles</button>
        </div>
      </aside>

      <section class="details">
        <h2 id="detailsTitle">Selecteer een melding</h2>
        <div id="detailBody" style="margin-top:10px;color:#444">Geen melding geselecteerd. Klik op “Nieuwe melding”.</div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="editBtn">Bewerk</button>
          <button id="closeBtn" class="secondary">Sluit melding</button>
        </div>
      </section>
    </main>
  </div>

  <div class="modal-backdrop" id="modal"><div class="modal" id="modalContent"></div></div>

  <script>
    const storageKey = 'meos_kmar_v2';
    let state = {user:null, incidents:[], selectedId:null};
    const $ = s=>document.querySelector(s); const $$ = s=>Array.from(document.querySelectorAll(s));

    function load(){ const raw=localStorage.getItem(storageKey); if(raw) state=JSON.parse(raw); render(); }
    function save(){ localStorage.setItem(storageKey,JSON.stringify(state)); render(); }

    function uid(){return 'id_'+Math.random().toString(36).slice(2,9)}
    function now(){return new Date().toLocaleString('nl-NL')}

    function render(){
      $('#loginBtn').textContent = state.user ? (state.user+' • Logout') : 'Login';
      const list=$('#incList'); list.innerHTML='';
      const q=$('#search').value.toLowerCase();
      const f=document.querySelector('.chip.active')?.dataset.filter||'all';
      state.incidents.filter(i=>f==='all'||i.status===f).filter(i=>(i.title+i.location+i.callSign).toLowerCase().includes(q)).forEach(i=>{
        const el=document.createElement('div'); el.className='inc'; el.dataset.id=i.id;
        el.innerHTML=`<div><h3>${i.title}</h3><div class='meta'>${i.callSign||'—'} • ${i.location||'—'}</div></div><button data-open='${i.id}'>Open</button>`;
        list.appendChild(el);
      });
      renderDetails();
    }

    function renderDetails(){ const i=state.incidents.find(x=>x.id===state.selectedId); const t=$('#detailsTitle'); const b=$('#detailBody'); if(!i){t.textContent='Selecteer een melding'; b.textContent='Geen melding geselecteerd.'; return;} t.textContent=i.title; b.innerHTML=`<strong>Roepnummer:</strong> ${i.callSign||'—'}<br><strong>Status:</strong> ${i.status}<br><strong>Locatie:</strong> ${i.location||'—'}<br><strong>Tijd:</strong> ${i.time}<br><br><strong>Beschrijving:</strong><p>${i.description||'—'}</p>`; }

    $('#newInc').onclick=()=>{
      showModal(`<h3>Nieuwe melding</h3><input id='t' placeholder='Titel'/><input id='c' placeholder='Roepnummer'/><input id='l' placeholder='Locatie'/><textarea id='d' placeholder='Beschrijving...'></textarea><div style='margin-top:10px;text-align:right'><button id='save'>Opslaan</button></div>`);
      $('#save').onclick=()=>{state.incidents.unshift({id:uid(),title:$('#t').value||'Nieuwe melding',callSign:$('#c').value,location:$('#l').value,description:$('#d').value,status:'open',time:now()});hideModal();save();};
    }

    $('#editBtn').onclick=()=>{const i=state.incidents.find(x=>x.id===state.selectedId);if(!i)return;showModal(`<h3>Bewerk melding</h3><input id='t' value='${i.title}'/><input id='c' value='${i.callSign}'/><input id='l' value='${i.location}'/><textarea id='d'>${i.description}</textarea><div style='margin-top:10px;text-align:right'><button id='save'>Opslaan</button></div>`);$('#save').onclick=()=>{i.title=$('#t').value;i.callSign=$('#c').value;i.location=$('#l').value;i.description=$('#d').value;i.time=now();hideModal();save();}}

    $('#closeBtn').onclick=()=>{const i=state.incidents.find(x=>x.id===state.selectedId);if(!i)return;i.status='closed';i.time=now();save();}

    $('#loginBtn').onclick=()=>{if(state.user){state.user=null;save();return}showModal(`<h3>Login</h3><input id='u' placeholder='Gebruikersnaam'/><div style='margin-top:10px;text-align:right'><button id='ok'>Login</button></div>`);$('#ok').onclick=()=>{state.user=$('#u').value;hideModal();save();}}

    $('#clearAll').onclick=()=>{if(confirm('Alle meldingen verwijderen?')){state.incidents=[];state.selectedId=null;save();}}

    $('#exportBtn').onclick=()=>{const blob=new Blob([JSON.stringify(state,null,2)],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='meos_kmar.json';a.click();}

    $('#importBtn').onclick=()=>{showModal(`<h3>Import JSON</h3><input type='file' id='file' accept='application/json'/><div style='margin-top:10px;text-align:right'><button id='ok'>Importeer</button></div>`);$('#ok').onclick=()=>{const f=$('#file').files[0];if(!f)return;const r=new FileReader();r.onload=e=>{state=JSON.parse(e.target.result);hideModal();save();};r.readAsText(f);}}

    $$('#incList').forEach(()=>{});
    $('#search').oninput=()=>render();
    $$('.chip').forEach(c=>c.onclick=()=>{$$('.chip').forEach(x=>x.classList.remove('active'));c.classList.add('active');render();});

    function showModal(html){$('#modalContent').innerHTML=html;$('#modal').style.display='flex';}
    function hideModal(){$('#modal').style.display='none';$('#modalContent').innerHTML='';}

    document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')hideModal();});

    document.addEventListener('click',e=>{if(e.target.dataset.open){state.selectedId=e.target.dataset.open;save();}});

    load();
    if(state.incidents.length===0){state.incidents.push({id:uid(),title:'Controle grenspost',callSign:'KMar-01',location:'Breda',status:'open',description:'Routinecontrole voertuig bij grensovergang.',time:now()});save();}
  </script>
</body>
</html>
